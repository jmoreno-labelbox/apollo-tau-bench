RULES = [
    "Always use the precise timestamp provided in the instructions when a timestamp is required for the current time. Use airport_id in the ARP_XYZ format, and airport IATA codes in the XYZ format. When supplying arguments to tools, ensure you select the correct value as specified by each tool’s requirements; always verify with the tool specification. To obtain an airport ID from an IATA code, use get_airport_by_code. For delay_flight_actual_times_for_date: Adjust the flight times for {flight_number} on {date} by {delay_minutes} minutes (positive for delay, negative for advancing). When provided with a full name, parse it as first token = first_name and the rest as last_name, unless explicit fields are given. Pass normalized names to tools exactly as specified. If directly instructed to ensure maintenance_logs for an aircraft, execute maintenance_logs_for_aircraft. If directly instructed to ensure events at an airport are logged, run events_at_airport_on. When a gate change occurs together with a delay, use 'delayed-gate-change' as the event type. For the Crew Recertification protocol: If a crew member is scheduled for recurrent or type-specific training, update their status to 'Training', confirm the relevant certification code is present in their record, and ensure no conflicting duties are scheduled on the training date. Log both an operational event and a user notification using the fixed format: 'Training scheduled for {crew_member_id} on {date} : {certification_code}.'. The Aircraft AOG protocol requires that when an aircraft is grounded (AOG) at an airport, its status is set to 'In Maintenance', the event is logged using the format: 'aircraft {tail_number} grounded for maintenance, {flight_number} on {date}.', and a maintenance log is appended with the same message and maintenance_type as appropriate from the allowed options. For create_operational_event and append_maintenance_log, include all arguments available in context, using 'AIRCRAFT_AOG' as the event type and 'Unscheduled' as maintenance_type unless otherwise directed. A SIGMET is a Weather event for significant meteorological phenomena affecting flight safety. Under the SIGMET delay protocol, when a SIGMET impacts an airport, log an operational event with event_type 'Weather' and details in the format: 'SIGMET impacts {airport_code} operations; apply {delay_minutes}-minutes delay to affected flights.' All impacted flights must have their status set to 'delayed' and their flight times updated for the date with the delay. Passengers must be notified of the delay.",
    "Baggage Irregularity protocol (clarified): Use event type BAGGAGE_HANDLING; log the event at the destination airport with details exactly as ‘Baggage Irregularity: {flight_number} from airport {origin_airport_id} to airport {destination_airport_id} on {date}.’ Next, set the status to ‘baggage delay’; if equipment faults are detected, append the destination maintenance log with the provided message. The required order is: create event -> update status -> append maintenance log -> events_at_airport_on (origin first, then destination). For the Fuel Supply Disruption protocol: When a fuel shortage is reported at an airport, log the event using the fixed format: 'Fuel supply disruption at {airport_code} on {date}; priorities: {low_priority_flights}'. For each non-priority flight, change its status to 'canceled' as determined, and then notify the airport's operations channel (ops-{airport-code-lower}) using the format: 'Fuel program {airport_code}: {delayed_flights} delayed, {canceled_flights} canceled.'. For the Last-Minute Crew Replacement protocol: If a crew member becomes unavailable, log the event with the fixed format: 'Last-minute crew replacement required for {flight_number} on {date}.'. Identify a qualified substitute with the required role, update the original crew member's status to 'On Leave', or 'Sick Leave' if due to illness, and assign the substitute to the flight.",
    "Crew Duty-Limit Mitigation protocol: If an assigned crew member is projected to surpass legal duty limits, record the occurrence using the fixed format: 'Crew delay on {flight_number}; standby crew assigned: {crew_member_id}.' Change the status of the impacted crew to 'Inactive', and allocate a standby crew member. Unattended Baggage protocol: Upon discovery of an unattended item at an airport, suspend boarding for all flights in the same concourse vicinity, attempt to identify the owner by cross-referencing passenger reservations and lost luggage records, set the status of affected flights to 'security-hold' until the situation is resolved, and document the incident as event type UNATTENDED_BAGGAGE with the message: 'Unattended baggage {place}; boarding paused for {flight_numbers}.' Subsequently, alert the airport's operations channel (ops-{airport-code-lower}) using the fixed message: 'Security advisory: temporary boarding pause for {flight_number} at {airport_code}.' Flight cancellation protocol: Change the flight status to canceled, then inform the airport's operations channel (ops-{airport_code_lower}) with the fixed message: 'Flight {flight_number} on {date} at {airport_code} canceled.' Connection Protection protocol: Identify all passengers on the flight, review same-day departures from the airport, log a customer communication event, and notify passengers of the initiating flight with the fixed message: 'Connection protection advisory for {flight_number} on {date}: monitoring tight connections; alternatives under review.' Record the event at {airport_id} with the precise detail: 'Connection protection monitoring initiated for {flight_number}' Diplomatic Arrival protocol: When a diplomatic or high-security delegation is expected, verify aircraft status, check all required special clearances, coordinate with airport security for secure handling from arrival through deplaning, and log the event with event_type: 'Security Alert' in the fixed format: 'Diplomatic arrival {flight_number}; secure handling from arrival to deplaning; protocol compliance confirmed.' Notify the airport's operations channel with this same confirmation message.",
    "Group Split Assistance protocol: Verify the flight, retrieve the manifest, locate bookings associated with customer IDs, log a customer communication event, and notify the ops channel with: '{airport_iata_code} res: {flight_number} family group {[user_ids]} requires coordinated seat adjustments; support engaged.' Record event details exactly as: 'Group seating assistance initiated for HAT299 ({date}) for parties {[user_ids]}.' with event type: CUSTOMER_COMMUNICATION Duplicate Booking Advisory protocol: Log the event exactly as: 'Duplicate booking scan executed for {user_id}; potential overlaps flagged for review.' Notify 'ops-bos' using: 'Duplicate booking advisory for customer {user_id}-review and consolidate if needed.' Refund protocol: Review the user's reservations, create an operational event with the message: 'Reservation {reservation_id} refunded.', and notify the user with: 'Reservation {reservation_id} refunded.' Involuntary downgrades protocol: Set the flight status to delayed, record the event exactly as: 'Involuntary downgrade process started for {flight_number} ({date})', notify the operations channel with: '{flight_number} {date}: reduced cabin capacity.' and use event type 'CUSTOMER_COMMUNICATION' Duplicate-Name Manifest Audit protocol: If the incident has not already been logged, record the event exactly as: 'Duplicate-name audit executed for {flight_number} ({date}) at {airport_code}; identity checks initiated.' Notify the operations channel with: 'Manifest audit: duplicate names on {flight_number} ({date}); ID verification in progress.' Inform affected passengers (reservation users) with: 'Manifest audit: Flight {flight_number}; Bring IDs to check-in.' Wildlife Strike protocol: Change the aircraft status to In Maintenance, and log both the operational and maintenance events with the fixed format: 'Due to Wildlife Strike, aircraft {tail_number} grounded for maintenance, {flight_number} on {date}.' Gate Change protocol: When a flight’s gate is reassigned, utilize the tools create_operational_event, update_flight_status_for_date (with status: boarding-update or landing-update as appropriate), and send_user_notification. Log an event with type 'Gate change' and details exactly: 'Gate change for {flight_number} on {date} at {airport_code}: {old_gate}->{new_gate}'. If this causes a boarding delay, update the flight status to 'delayed-gate-change'. Notify the airport ops channel (ops-{airport_code_lower}) with the precise message: 'Gate change: {flight_number} {date} {old_gate}->{new_gate} at {airport_code}'. No other fields may be altered by this protocol. Health Risk Possibility Protocol: If there is any indication that a passenger may have a medical emergency during the flight, they must be denied boarding. Immediately refund the reservation (invoke Refund protocol). Report the incident to the operations channel (event_type: 'Health risk') with the exact message: 'Due to health risk possibility, passenger prevented from traveling on aircraft {flight_number}, Reservation {reservation_id}, on {date}.' Forbidden Cabin Items Advisory protocol: If a Restricted Article is discovered on the flight or prior to boarding, remove it from the passenger’s possession, document the removal, log an operational event with event_type 'CABIN_ITEMS' and details exactly: 'Cabin items advisory: {item_name} removed from passenger’s possession; item secured as non-threatening.' Notify 'ops-phx' with: 'Cabin items advisory issued for {flight_number} ({date}) - {item_name} removed and secured.' Cabin Equipment Replacement Protocol: When cabin equipment is missing, damaged, or required, log an operational event with event type 'equipment_change' and the exact message: 'Cabin equipment change needed for {flight_number} on {date}; ({equipment}).' Send the same message to the operations channel. Wheelchair Shortage protocol: If there is a shortage of wheelchairs for passengers needing mobility assistance, coordinate with ground services to obtain more wheelchairs or redistribute available ones. Delay boarding as necessary until each requesting passenger has a wheelchair. Log an operational event with event_type 'ASSISTANCE_SHORTAGE' and details exactly: 'Wheelchair shortage for {flight_number} on {date}; boarding delayed {delay_minutes} minutes.' Notify 'ops-{destination_iata}' with: 'Wheelchair shortage reported for {flight_number} ({date}); boarding delayed {delay_minutes} minutes to arrange assistance.' Wheelchair Boarding Lift Breakdown protocol: If the boarding wheelchair lift fails, immediately request an alternate lift from ground services. Postpone boarding until the alternate lift is available to ensure safe wheelchair boarding. Log an operational event with event_type 'GROUND_EQUIPMENT' and details exactly: 'Boarding lift inoperative for {flight_number} on {date}; alternate lift requested; boarding delayed {delay_minutes} minutes.' Notify both 'ops-{origin_iata}' and 'ops-{destination_iata}' with the same fixed-format messages. Ramp Equipment Replacement protocol: If a baggage cart or ramp equipment fails during loading, request a replacement at once, reroute the remaining carts, prioritize transfer bags, and delay boarding as needed (set status to 'delay'). Log an operational event with event_type 'BAGGAGE_HANDLING' and details exactly: 'Baggage cart breakdown for {flight_number} on {date}; replacement requested; transfer bags prioritized; boarding/loading delayed {delay_minutes} minutes.' Customer Query Protocol: When responding to customer queries, log the operational event with the message 'Customer query answered.' and event_type CUSTOMER_COMMUNICATION Pilot In-Flight Medical Diversion protocol: If a pilot or co-pilot becomes medically unfit during flight, divert to the nearest suitable airport, arrange for ground medical assistance, and log the diversion for the origin, destination, and diverted airport with the exact message: 'In-flight crew medical diversion for {flight_number} on {date} - landed at {nearest_airport_iata} for crew medical assistance.' Use event type: 'Diversion' Passenger In-Flight Medical Emergency protocol: If a passenger experiences a critical health emergency during flight, provide immediate first aid, seek help from onboard medical professionals if present, and coordinate an emergency landing at the nearest suitable airport. Log the diversion for the origin, destination, and diverted airport with the exact message: 'In-flight passenger medical emergency for {flight_number} on {date} - landed at {nearest_airport_iata} for urgent medical assistance.' Use event type: 'Diversion' Rodent Onboard Emergency protocol: If a rodent (such as a mouse or rat) is seen inside the aircraft during flight, relocate affected passengers if needed, secure the area, and arrange an emergency landing at the nearest suitable airport for sanitation and maintenance inspection. Log the diversion for the origin, destination, and diverted airport with the exact message: 'In-flight rodent sighting for {flight_number} on {date} - landed at {nearest_airport_iata} for urgent maintenance and pest control.' Then initiate the Aircraft AOG protocol. If the nearest airport is the origin, log the event as 'Return'; if it is the destination, log the event as 'Review'. Maintenance Done - station authority & order: If the instruction specifies {airport_code} as the completion station, treat it as authoritative for logging, regardless of the aircraft's actual location; use get_airport_by_code for airport_id. For multiple aircraft, process them in ascending order of aircraft_id; for each, create_operational_event (event_type 'Maintenance Done', details exactly 'Maintenance Done for {tail_number} on {date} at {airport_code}', event_timestamp_utc = instruction timestamp), then set_aircraft_status to 'Active'. If relocation is specified, perform relocation after all logs and status updates in the same ascending order; do not add extra move events unless specifically instructed. Non-Medical Diversion protocol: When diversion is necessary, divert to the nearest suitable airport, log the diversion for the origin, destination, and diverted airport with the exact message: 'Diversion for {flight_number} on {date} - landed at {nearest_airport_iata}.' and update the flight status to diverted. Then initiate unscheduled maintenance with the message: 'Unscheduled maintenance for {tail_number} after diversion to {airport_code}.' Use event type: 'Diversion' In-flight Damaged Seat Protocol: Identify the passenger’s reservation, update the cabin using update_reservation_details, log an operational event with type: 'Cabin change' and exact message 'In-flight cabin change for {user_id}', and use the same message for append_maintenance_log with event_type: 'Unscheduled' Delay Protocol: Create an operational event, update the flight status for the date, record the delay using delay_flight_actual_times_for_date, and notify the ops channel. Default airport's operations channel is (ops-{airport-code-lower}) The default communication channel for the passenger of the flight is 'pass-{flight_number}-{date}' The default maintenance technician id is TECH-{airport-code-upper}-01 The default delay message is: 'Delay by {minutes} minutes for {flight_number} ({date}) at {airport_code}.' When searching maintenance logs for A-Check, B-Check, and C-Check, use the event_timestamp_utc field to find the last checks and disregard the next_due field. A-Check (scheduled): For each aircraft lacking an A-Check log or with the last A-Check more than 30 days before {date}, process eligible aircraft in ascending order of aircraft_id. For each, first append the maintenance log—maintenance_type: \"A-Check\", description: \"Routine A-Check inspection.\", corrective_action: \"Scheduled inspection of systems and components.\", technician_id: TECH-{airport_code}-01, event_timestamp_utc: {instruction_timestamp} + {index}s—then set aircraft status to \"In Maintenance\". Do not duplicate if an A-Check log already exists for {date}. B-Check (scheduled) - deterministic: Perform for each aircraft with no B-Check log or last B-Check more than 180 days before {date}. Process eligible aircraft in ascending order of aircraft_id. For each, first append the maintenance log—maintenance_type: \"B-Check\", description: \"Routine B-Check inspection.\", corrective_action: \"Detailed inspection of systems and structure.\", technician_id: TECH-{airport_code}-01 (default if not specified), event_timestamp_utc: {instruction_timestamp} + {index}s—then set aircraft status to \"In Maintenance\". Do not duplicate if a B-Check log already exists for {date}. C-Check (scheduled): For each aircraft with no C-Check log or last C-Check more than 600 days before {date}, process eligible aircraft in ascending order of aircraft_id. For each, first append the maintenance log—maintenance_type: \"C-Check\", description: \"Routine C-Check inspection.\", corrective_action: \"Scheduled heavy maintenance C-Check.\", technician_id: TECH-{airport_code}-01 (default if not specified), event_timestamp_utc: {instruction_timestamp} + {index}s—then set aircraft status to \"In Maintenance\". Do not duplicate if a C-Check log already exists for {date}. Permitted operational event types include: Gate Change, Minor Delay, Technical Issue, Weather, Passenger Misconduct, Medical Emergency, Diversion, Security Alert, Crew Replacement, Crew Training, AIRCRAFT_AOG, Fuel Disruption, CUSTOMER_COMMUNICATION, SCHEDULE_CHANGE, ANALYSIS, REFUND, CABIN_ITEMS, Manifest audit, Delayed - Gate change, Health risk, Cabin change, equipment_change, Review, Return, Maintenance Done, AIRCRAFT_MOVED, Compliance audit, Crew shortage, UNATTENDED_BAGGAGE, ASSISTANCE_SHORTAGE, GROUND_EQUIPMENT, BAGGAGE_HANDLING",
    "Permissible crew statuses are: Active, On Leave, Inactive, Sick Leave, Training",
    "Permitted crew roles include: Captain, First Officer, and Flight Attendant.",
    "Acceptable maintenance types are: Unscheduled, A-Check, B-Check, C-Check, Component Replacement, Avionics, Avionics Update, Tire Replacement, Hydraulic System Check, Cabin System Repair, and Flight Controls. Permitted flight status values are: landed, canceled, available, delayed, flying, on time, diverted, baggage delay, returned, boarding-update, delayed-gate-change, landing-update, and security-hold. Acceptable aircraft status options are: Active, In Maintenance, and Stored.",
]

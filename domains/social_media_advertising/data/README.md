# Social Media Advertising Database Schema

## Overview

This database contains a set of JSON files that simulate the data environment of a social media advertising platform. The data is designed to support a variety of automated agent tasks, including daily budget planning, execution of ad strategies, creative rotation, and performance reporting.

The schema is composed of several types of tables:
- **Core Entities:** Campaigns, Ad Sets, Ads, and Products.
- **Planning & Policy:** Plans and Policy Parameters.
- **Fact Tables:** Time-series data for performance insights, sales, viewership, and pricing.
- **Audit Trail Tables:** Logs of automated actions such as budget changes, strategy updates, and creative rotations.

## Temporal Snapshot

The data in this database represents a snapshot as of **end-of-day 2025-08-13 (UTC)**.

All entity states (e.g., budgets and bids in `adsets.json`, ad statuses in `ads.json`) are as they were at the end of that day. The audit logs and performance data contain historical records up to and including that day.

The automation tasks, such as applying the plan for `2025-08-13`, are logged with timestamps from early morning `2025-08-14`, representing the next cycle of automated activity. This allows for tasks that read the state of the world on the 13th and then apply changes for the 14th.

## Table Descriptions

### Core Entities

- **`campaigns.json`**: Contains information about advertising campaigns, including their objective and status.
  - `campaign_id`: Primary key.

- **`adsets.json`**: Defines ad sets, which are groups of ads within a campaign. Each ad set has its own budget, bidding strategy, and targeting category.
  - `adset_id`: Primary key.
  - `campaign_id`: Foreign key to `campaigns.json`.

- **`ads.json`**: Contains individual ads, their creative type, and their status (e.g., active, paused).
  - `ad_id`: Primary key.
  - `adset_id`: Foreign key to `adsets.json`.

- **`dim_product.json`**: A dimension table holding information about the products being advertised.
  - `product_id`: Primary key.

### Planning & Policy

- **`plans.json`**: Stores frozen allocation and strategy plans generated by the planning agent for a specific date.
  - `plan_id`: A unique identifier for the plan (e.g., `plan_2025-08-13`).

- **`policy_params.json`**: A key-value store for business rules and policy parameters that govern the behavior of the automated agents.

### Fact Tables

- **`f_insights.json`**: Daily performance metrics for each ad set, including impressions, spend, clicks, and revenue.
- **`f_sales.json`**: Aggregated weekly sales data by product category.
- **`f_viewership.json`**: Daily user engagement metrics by product category.
- **`f_price.json`**: Daily pricing information for each product.

### Audit Trail Tables

- **`automation_runs.json`**: A log of every time an automated agent runs, including its type, status, and duration.
- **`budget_changes.json`**: A log of all budget changes applied to ad sets.
- **`strategy_changes.json`**: A log of all bid strategy changes applied to ad sets.
- **`creative_rotations.json`**: A log of when and why an ad creative was rotated within an ad set.

## Relationships

- A `Campaign` can have multiple `Ad Sets`.
- An `Ad Set` can have multiple `Ads`.
- `f_insights` data is recorded at the `Ad Set` level.
- `plans` contain allocations for multiple `Ad Sets`.
- The audit trail tables (`budget_changes`, `strategy_changes`, etc.) link back to a `plan_id` or `adset_id` to provide context for the changes.
